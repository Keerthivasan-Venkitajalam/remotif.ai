from langchain_community.document_loaders import UnstructuredURLLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter  # Keeping original import
from langchain_community.embeddings import OpenAIEmbeddings
from langchain_community.vectorstores import Chroma

import os
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

# Set OpenAI API key
os.environ['OPENAI_API_KEY'] = os.getenv('OPENAI_API_KEY')

# URLs to load
urls = [
    "https://brainlox.com/courses/category/technical",
    "https://brainlox.com/courses/872d1cb6-8469-4797-b267-8c41837b10e2",
    "https://brainlox.com/courses/4f629d96-5ed9-4302-ae0e-3479c543a49e",
    "https://brainlox.com/courses/2cf11f62-6452-41f1-9b42-303fb371b873",
    "https://brainlox.com/courses/be32e068-edca-4b41-96ee-4839de6aaebb",
    "https://brainlox.com/courses/0deafb39-3208-42db-93e3-bd69f8562f82",
    "https://brainlox.com/courses/fc9e2faf-dbe1-47bf-994c-f566a9ad3b42",
    "https://brainlox.com/courses/b0f2428a-c1c0-4def-8ac2-692a2d51a5b4",
    "https://brainlox.com/courses/e0edfcf8-9e0f-4c7a-bc90-3000822924e2",
    "https://brainlox.com/courses/fc29b015-962f-41fc-bc93-181d3ed87842",
    "https://brainlox.com/courses/fe8f5696-eb0e-48a0-a505-147e9c502b65",
    "https://brainlox.com/courses/9101883f-00af-48f7-949a-36cfc60ecfcf",
    "https://brainlox.com/courses/f9f7b907-5f4f-472d-a7e1-d44d38255a42",
    "https://brainlox.com/courses/cfcf2aa4-e220-4ce7-844e-563ebfaa98bd",
    "https://brainlox.com/courses/c5e8d5e8-58cb-4836-94e4-51314ffba4f3",
    "https://brainlox.com/courses/cd8e693c-c6a7-4dca-aeb1-4b7cf1dde495",
    "https://brainlox.com/courses/6a0fc4c9-2074-4854-ac31-c7dfad9ed932",
    "https://brainlox.com/courses/51890aee-163e-4ef7-86ff-fe0d6acba7e1",
    "https://brainlox.com/courses/c4bdeda0-9565-4073-9eeb-67f4a79e9ec7",
    "https://brainlox.com/courses/cc34d7ec-62ae-4018-b75e-207df98a4300",
    "https://brainlox.com/courses/0544dc35-181e-4e75-b26d-69393de68022",
    "https://brainlox.com/courses/8ca45c22-2dae-4c21-840c-8c9a177d09b3",
    "https://brainlox.com/courses/5d6b48ea-641e-4707-b7cf-c4f270789c9e",
    "https://brainlox.com/courses/7ef0ff36-cf58-4ce7-a010-b6bc7350d78a",
    "https://brainlox.com/courses/72423503-2e09-4404-92f5-48292dda42e3",
    "https://brainlox.com/courses/24e3bb16-bc23-4e6e-a74c-1ed32005cf0f",
    "https://brainlox.com/courses/31e70d66-efd5-44fc-929c-7de0e524624b",
    "https://brainlox.com/courses/89d301ea-ff81-4224-8d38-a35e8575bffd",
    "https://brainlox.com/courses/1af061fc-0890-40ac-98ae-01285283c5ff",
    "https://brainlox.com/courses/37b3b505-f8ca-4fd6-92e1-56da829f1805",
    "https://brainlox.com/courses/9829d760-3d63-456a-a1d3-25b96e554819",
    "https://brainlox.com/courses/af72f1d6-ee1b-48ba-a217-30985c593bb5",
    "https://brainlox.com/courses/189a9ef3-be9d-4b42-a09c-75665fa36e3e",
    "https://brainlox.com/courses/88ac0ed1-e388-41c9-a1b4-bd82beb52c10",
    "https://brainlox.com/courses/7ad05239-54cb-4cbb-8cec-4065512db97a",
    "https://brainlox.com/courses/7f20a234-094c-457a-b2b4-8712bd8f0616",
    "https://brainlox.com/courses/03549fee-5478-4352-b146-f2a2c8561191",
    "https://brainlox.com/courses/94c549e6-ebca-4bbe-b1a8-17beda62b6d5",
    "https://brainlox.com/courses/5ba67aa9-b272-42ec-88d2-81cd5af6c643",
    "https://brainlox.com/courses/848a2ee8-b9ce-464a-bcbc-78fcdd67b9dd",
    "https://brainlox.com/courses/4d6f6d90-a53f-4792-a491-1697bb384d57",
    "https://brainlox.com/courses/d6e5c1ea-f3bf-4435-a1c6-7566aef9ddc2",
    "https://brainlox.com/courses/3cdb1ba6-7b9d-4a04-8ba4-bfffbef9a77f",
    "https://brainlox.com/courses/6ffc967e-8caf-4540-b0f3-c1e684195d03",
    "https://brainlox.com/courses/8c6151e3-3141-4a64-8fe0-d5df205e750d",
    "https://brainlox.com/courses/db80cdd0-d396-482a-913e-1fc81c8d9ac4",
    "https://brainlox.com/courses/9e2df5e5-3dc5-4c87-b385-f464642d8562",
    "https://brainlox.com/courses/0884af64-fb1b-4c15-9850-3315b99fd92d",
    "https://brainlox.com/courses/4b7a6968-f8f6-4f98-bd8d-357b71ca9496",
    "https://brainlox.com/courses/9e0490f4-e45b-41df-858c-34a4eba5836b",
    "https://brainlox.com/courses/fd86f75c-b1b5-450d-98ee-7e3ad0b1e357",
    "https://brainlox.com/courses/c110330f-d41d-48fe-8433-88e7527c4d77",
    "https://brainlox.com/courses/1164fafc-7e5b-4126-b1d6-ce228e266345",
    "https://brainlox.com/courses/a06e18a8-3e06-4777-85c5-fb22b35ea46d",
    "https://brainlox.com/courses/50986fd0-ea11-4d2e-971f-5fb88fb81542",
    "https://brainlox.com/courses/5f754053-de57-4f46-9bb3-b11d5c9e42e0",
    "https://brainlox.com/courses/f6853a9e-84ce-40c6-9362-00fcf701e459",
    "https://brainlox.com/courses/a0f7d0c8-04ec-4745-b4bc-7e17a7551b74",
    "https://brainlox.com/courses/6cc859b2-8003-4c08-bd2c-152297865b7b",
    "https://brainlox.com/courses/1e89c97f-781a-4da1-95cb-29eaf6fe8109",
    "https://brainlox.com/courses/9820b8f3-2777-48ea-94a3-c289b81a15f1",
    "https://brainlox.com/courses/335f4cb1-e5a5-4f54-9fdb-377b268378c3",
    "https://brainlox.com/courses/ae410a16-014a-41b4-9c20-708a1c2a12e5",
    "https://brainlox.com/courses/f83eb03d-060f-47cf-b39b-222fded62d44",
    "https://brainlox.com/courses/086738ed-0599-40bc-8432-d57cf41f8c7d",
    "https://brainlox.com/courses/03402c3a-4c05-4cd2-bbad-7271d67d292b",
    "https://brainlox.com/courses/b86cc173-1791-4c22-9a1e-b0ab8b4971ac",
    "https://brainlox.com/courses/fe9fd23d-31a7-41e3-8de8-26814e967476",
    "https://brainlox.com/courses/80d1406b-d81d-4b13-8b8a-11826d7a384b",
    "https://brainlox.com/courses/8cd6db1d-b28e-4cb3-80cc-b88f890f8c8d",
    "https://brainlox.com/courses/c35083b1-79ff-43ff-8db6-13da97d8ad68",
    "https://brainlox.com/courses/961502df-b18e-44c0-8720-73054ef5ebdb",
    "https://brainlox.com/courses/5dca16d3-2625-4fd6-839a-f62b69741878",
    "https://brainlox.com/courses/d3db9b36-105f-4135-b51d-d3b90d35072c",
    "https://brainlox.com/courses/65d3e7eb-5b5e-4a9e-b4db-0346469d8ff8",
    "https://brainlox.com/courses/054db0c4-505e-4884-b7f6-457d3ed0f86b",
    "https://brainlox.com/courses/a6bfbf5e-41e3-49cb-85c7-40885cb2da11",
    "https://brainlox.com/courses/fed0d11b-3e92-4c8e-91f2-c1100b65e202",
    "https://brainlox.com/courses/72e5e6c8-d3e2-4c4f-89d3-4dd1aa21e1a6",
    "https://brainlox.com/courses/bb60007b-8c88-4c03-a505-f81e24d4381f",
    "https://brainlox.com/courses/3da2c22d-2c36-4b20-9ad3-2f05a12df70c",
    "https://brainlox.com/courses/c60f4ac0-6b17-481d-9b6f-9b94d1af3b69",
    "https://brainlox.com/courses/4a6354dc-9a95-4e1c-80f6-c660db3eb640",
    "https://brainlox.com/courses/8c35b2b2-fbac-42f2-985a-19d573d0c1c1",
    "https://brainlox.com/courses/830c67ed-24a2-496e-9b95-2ba7d21f32f3",
    "https://brainlox.com/courses/3fbc7cd0-f27d-460d-b847-4ee7bfb6c539",
    "https://brainlox.com/courses/99ec2932-2c57-421a-978d-1f0bff024be4",
    "https://brainlox.com/courses/3efc905f-5b8c-46a7-8578-14f7761b7693",
    "https://brainlox.com/courses/2a4f6f3c-97b0-4e7e-9e04-d490b6f4f29b",
    "https://brainlox.com/courses/d90b0c94-e1b2-4b9e-bb56-d1cfb8c12ec4",
    "https://brainlox.com/courses/48b7eb2a-320a-4d38-b669-18e1c0ea00b4",
    "https://brainlox.com/courses/84c45297-01d7-4663-a35c-337d2c85ed96",
    "https://brainlox.com/courses/5be06236-4b10-4998-9334-fae0e65e35f8",
    "https://brainlox.com/courses/24629ebf-3ff2-4dd7-b8da-39b6f1e13d76",
    "https://brainlox.com/courses/d18699b8-541e-4a50-95db-5bc747d0085b",
    "https://brainlox.com/courses/26dc2d0b-02db-4d89-881e-11d8f8c700f4",
    "https://brainlox.com/courses/3efc96bb-bcc3-4ab1-807d-32b95c0be12f",
    "https://brainlox.com/courses/c14663ac-857f-4d3e-8af2-556a09713f57",
    "https://brainlox.com/courses/0d25281c-5a4f-4ae6-8d9f-d96bbbe2057e",
    "https://brainlox.com/courses/26ac5d72-bf0d-46eb-9d82-15833902a132",
    "https://brainlox.com/courses/c285b2d5-0c7e-4401-a8df-276a328907d4",
    "https://brainlox.com/courses/66ed306e-26a1-4525-b07d-88bcf1727f47",
    "https://brainlox.com/courses/fe452f5e-9371-43a7-9e28-b380fd3e6ae5",
    "https://brainlox.com/courses/4015547a-0c8d-4e13-910e-989274460e17",
    "https://brainlox.com/courses/5e9cfad4-0527-4b11-ae56-1e39c0e99b0a",
    "https://brainlox.com/courses/53ff7a40-66f4-4e3e-aba3-292c9a9a5407",
    "https://brainlox.com/courses/4dc003d2-7020-4b55-a6b3-66b9d3e1a5ee",
    "https://brainlox.com/courses/5b478e1d-5024-4d5a-bd94-062b91cb1448",
    "https://brainlox.com/courses/d93c69e4-8fc2-47f4-bb73-9d49712a3293",
    "https://brainlox.com/courses/3b1afc17-2e92-42c4-9fa8-3cb5f8395220",
    "https://brainlox.com/courses/b29b45a0-e716-4f64-a14d-9bb26b1a889e",
    "https://brainlox.com/courses/ed132b5f-20c7-49bb-9c63-fd762734e7c6",
    "https://brainlox.com/courses/40e49a57-6d90-4953-b4d3-d484a7f121f6",
    "https://brainlox.com/courses/9a85343d-b9ef-4d96-a0e7-51c2c1340010",
    "https://brainlox.com/courses/8c2fbc30-f40d-4136-a287-6014823e1a20",
    "https://brainlox.com/courses/6c6be2f2-223f-408a-83fc-d035efb5fc18",
    "https://brainlox.com/courses/c68242c1-0be4-46c6-b334-b3f5038c18c1",
    "https://brainlox.com/courses/a28fe711-bb43-46b4-bcd0-12ac27b2f96d",
    "https://brainlox.com/courses/29d6b4ed-1879-474f-80ef-f8990a1b2279",
    "https://brainlox.com/courses/9a78d9ff-1473-482f-9346-cf7719d0dc24",
    "https://brainlox.com/courses/c83286e5-870d-48e0-b7b8-b5cb5a0cc29f",
    "https://brainlox.com/courses/39b66ad4-5440-46a6-9151-594cd06cb066",
    "https://brainlox.com/courses/6f4e6ae6-544d-4e0f-a518-f8e2f65f3f5e",
    "https://brainlox.com/courses/63ba3890-ea98-4653-8615-88d75e41ae3e",
    "https://brainlox.com/courses/a103140a-99b6-4764-86e2-9fd7e083fa6d",
    "https://brainlox.com/courses/d20498d6-6e56-4b18-98e4-1c855a3ed196",
    "https://brainlox.com/courses/8df0fd53-f4b3-49f5-83ad-2640542840ab",
    "https://brainlox.com/courses/7a5ec05b-b30b-4af7-aef6-70e1528d63a7",
    "https://brainlox.com/courses/f0460c05-d1d2-467a-b4c6-b9d7cf569c8b",
    "https://brainlox.com/courses/5b478e1d-5024-4d5a-bd94-062b91cb1448",
    "https://brainlox.com/courses/cbb5c234-087f-4a82-93a6-5e1619e35250",
    "https://brainlox.com/courses/5b480d67-2bff-4da3-8153-00ccf3355eae",
    "https://brainlox.com/courses/75d44c60-2bb5-4374-9c70-603ee0af92b0",
    "https://brainlox.com/courses/80d80fc8-b3ab-43e0-a13e-c2aaf03214cb",
    "https://brainlox.com/courses/4c509b1f-75a3-4092-81b0-e1a9d8a4d9c1",
    "https://brainlox.com/courses/cab94fa6-5a6a-4030-b019-0a2884c47325",
    "https://brainlox.com/courses/9cf3da79-3931-4b62-8323-4a5e791a186e",
    "https://brainlox.com/courses/0b83b825-b365-4907-9477-0f0be3e158d7",
    "https://brainlox.com/courses/41eb80de-1e12-484b-8057-ccf42699b0f2",
    "https://brainlox.com/courses/2265f0d1-0f7d-4f82-8e1b-f37b4e152292",
    "https://brainlox.com/courses/5f5e3ae2-2bbf-44e6-84ff-d1f501c7055b",
    "https://brainlox.com/courses/a64b42ab-5c9d-4b3e-a4db-cdb11e665e98",
    "https://brainlox.com/courses/4b96d547-8b71-4bb0-8de0-c2ed97b29fd6",
    "https://brainlox.com/courses/251c8304-bc34-4b6e-94ed-588fa226adbb",
    "https://brainlox.com/courses/a0fa9c22-e1de-47a6-9cd5-ecfbe3085621",
    "https://brainlox.com/courses/ee36f804-1fa8-41f7-81d0-3e7e17b5bb63",
    "https://brainlox.com/courses/5bb3be92-52ab-49b0-b885-b8dbdc7ad04b",
    "https://brainlox.com/courses/171084c7-9f7e-4b86-a66d-27d82efb6b9c",
    "https://brainlox.com/courses/5dbce4d1-92c2-40e5-92ed-03cd4d4a7797",
    "https://brainlox.com/courses/2b06db71-888d-4948-bd45-bd59eb4ddfa0",
    "https://brainlox.com/courses/2b40f161-e039-4212-8498-e12d235d5f78",
    "https://brainlox.com/courses/001b72a3-1e23-4a38-94eb-9465f9be4b07",
    "https://brainlox.com/courses/d96a70d4-3d06-49d5-859e-9277308a245d",
    "https://brainlox.com/courses/3e0a4a18-3b41-4f65-aeb2-1f1193e8f6de",
    "https://brainlox.com/courses/1c3f4e09-bd6c-49f4-841b-01b0d66e7b9d",
    "https://brainlox.com/courses/647284f3-8d16-43db-b011-60621fc0107c",
    "https://brainlox.com/courses/7cf98d0b-6cd2-47b5-b053-516d5dfd6b22",
    "https://brainlox.com/courses/3363739e-327d-4c4d-9f8a-f5eb554af5c7",
    "https://brainlox.com/courses/10d04a17-0622-4225-bdc8-b124799ae75e",
    "https://brainlox.com/courses/f669f6c2-2a76-4f64-8a1d-4b7e7ffb3a92",
    "https://brainlox.com/courses/8b2ed77b-8db5-470a-82f4-d489d13a8e0f",
    "https://brainlox.com/courses/24507b9a-d6c4-4620-bc1d-7e0e101bf4ec",
    "https://brainlox.com/courses/d2e4f2b7-e38c-4cb1-a5fc-c8c477fe763f",
    "https://brainlox.com/courses/f33f4ba3-f0b5-4011-bd61-2fa281af7d6d",
    "https://brainlox.com/courses/7bb9f9e2-b15b-4387-951b-5e3a7d13e1d8",
    "https://brainlox.com/courses/92e987f1-c845-4b08-b618-ddecbf5c871f",
    "https://brainlox.com/courses/0d63beff-9b00-49fa-bf21-4df18c6a667e",
    "https://brainlox.com/courses/a5fc678e-4e1f-4036-a272-937ad9bcd52a",
    "https://brainlox.com/courses/f49a0065-4b07-4164-8df5-1b421d7f1b3f",
    "https://brainlox.com/courses/f3de80f3-d73e-4645-b18e-8d47d7f0214c",
    "https://brainlox.com/courses/2f542769-94ec-4b8e-8453-dffac52f54b7",
    "https://brainlox.com/courses/2009a587-7be7-4951-8cbf-71e1000021e1",
    "https://brainlox.com/courses/3c3e3b18-cb26-41c5-9e5f-63f579b5af9c",
    "https://brainlox.com/courses/01e014cf-bdd9-43a6-b68b-1a11cf7a8ef7",
    "https://brainlox.com/courses/5033e7c4-b442-4b0b-91a3-df4bb21a50d0",
]

loader = UnstructuredURLLoader(urls=urls)

documents = loader.load()



text_splitter = RecursiveCharacterTextSplitter(chunk_size=1000, chunk_overlap=200)
splits = text_splitter.split_documents(documents)


embeddings = OpenAIEmbeddings()
vectorstore = Chroma.from_documents(documents=splits, embedding=embeddings, persist_directory="./chroma_db")
vectorstore.persist()


print(f"Loaded {len(documents)} documents and created {len(splits)} splits.")
print(f"Vector store created and persisted in './chroma_db'")

# database will be created and words will be stored as embeddings